---
const { title = "Snowy Bagel mascot", size = 280 } = Astro.props;
---

<svg
  width={size}
  height={size}
  viewBox="0 0 200 200"
  role="img"
  aria-label={title}
  class="bagel-mascot"
>
  <defs>
    <!-- Bagel gradient - warm golden brown -->
    <radialGradient id="bagelBody" cx="40%" cy="35%" r="65%">
      <stop offset="0%" stop-color="var(--bagel-light, #f5d4a3)" />
      <stop offset="50%" stop-color="var(--bagel-mid, #e8b86d)" />
      <stop offset="100%" stop-color="var(--bagel-dark, #c9944a)" />
    </radialGradient>
    
    <!-- Inner shadow for bagel hole -->
    <radialGradient id="bagelHole" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="var(--hole-inner, #8b5e34)" />
      <stop offset="70%" stop-color="var(--hole-outer, #a67244)" />
    </radialGradient>
    
    <!-- Rosy cheek gradient -->
    <radialGradient id="cheekGlow" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="var(--cheek, #ffb5b5)" stop-opacity="0.8" />
      <stop offset="100%" stop-color="var(--cheek, #ffb5b5)" stop-opacity="0" />
    </radialGradient>
    
    <!-- Scarf gradient -->
    <linearGradient id="scarfGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="var(--scarf-1, #7ec8e3)" />
      <stop offset="50%" stop-color="var(--scarf-2, #58b4d1)" />
      <stop offset="100%" stop-color="var(--scarf-1, #7ec8e3)" />
    </linearGradient>

    <!-- Sparkle filter -->
    <filter id="sparkleGlow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="1" result="blur" />
      <feMerge>
        <feMergeNode in="blur" />
        <feMergeNode in="SourceGraphic" />
      </feMerge>
    </filter>
  </defs>

  <!-- Falling snowflakes around the bagel -->
  <g class="snowflakes" opacity="0.7">
    <!-- Large snowflakes -->
    <g class="flake flake-1" fill="var(--snow-color, #fff)">
      <circle cx="25" cy="30" r="4" />
      <path d="M25 24v12M19 30h12M21.5 26.5l7 7M28.5 26.5l-7 7" stroke="var(--snow-color, #fff)" stroke-width="1.5" fill="none" />
    </g>
    <g class="flake flake-2" fill="var(--snow-color, #fff)">
      <circle cx="175" cy="45" r="3.5" />
      <path d="M175 40v10M170 45h10M172 42l6 6M178 42l-6 6" stroke="var(--snow-color, #fff)" stroke-width="1.2" fill="none" />
    </g>
    <g class="flake flake-3" fill="var(--snow-color, #fff)">
      <circle cx="40" cy="165" r="3" />
      <path d="M40 161v8M36 165h8M37.5 162.5l5 5M42.5 162.5l-5 5" stroke="var(--snow-color, #fff)" stroke-width="1" fill="none" />
    </g>
    
    <!-- Small snowflake dots -->
    <circle cx="165" cy="160" r="2.5" fill="var(--snow-color, #fff)" class="flake flake-4" />
    <circle cx="20" cy="100" r="2" fill="var(--snow-color, #fff)" class="flake flake-5" />
    <circle cx="180" cy="110" r="1.8" fill="var(--snow-color, #fff)" class="flake flake-6" />
    <circle cx="55" cy="25" r="1.5" fill="var(--snow-color, #fff)" class="flake flake-7" />
    <circle cx="150" cy="175" r="2" fill="var(--snow-color, #fff)" class="flake flake-8" />
    <circle cx="60" cy="180" r="1.5" fill="var(--snow-color, #fff)" class="flake flake-9" />
  </g>

  <!-- Main bagel body -->
  <ellipse
    cx="100"
    cy="105"
    rx="58"
    ry="55"
    fill="url(#bagelBody)"
    stroke="var(--bagel-stroke, #b07d3a)"
    stroke-width="2"
  />
  
  <!-- Bagel hole -->
  <ellipse
    cx="100"
    cy="105"
    rx="22"
    ry="20"
    fill="url(#bagelHole)"
    stroke="var(--bagel-stroke, #b07d3a)"
    stroke-width="1.5"
  />
  
  <!-- Bagel texture/seeds -->
  <g fill="var(--seed-color, #d4a85a)" opacity="0.6">
    <ellipse cx="70" cy="85" rx="4" ry="2.5" transform="rotate(-20 70 85)" />
    <ellipse cx="130" cy="88" rx="3.5" ry="2" transform="rotate(15 130 88)" />
    <ellipse cx="62" cy="115" rx="3" ry="2" transform="rotate(-40 62 115)" />
    <ellipse cx="138" cy="112" rx="3.5" ry="2" transform="rotate(35 138 112)" />
    <ellipse cx="85" cy="140" rx="3" ry="2" transform="rotate(10 85 140)" />
    <ellipse cx="115" cy="142" rx="2.5" ry="1.8" transform="rotate(-15 115 142)" />
  </g>

  <!-- Cozy winter scarf wrapped around -->
  <g class="scarf">
    <!-- Scarf wrapped around bottom -->
    <path
      d="M50 130 Q60 145 100 148 Q140 145 150 130 Q145 155 100 160 Q55 155 50 130"
      fill="url(#scarfGrad)"
      stroke="var(--scarf-stroke, #4a9bb8)"
      stroke-width="1.5"
    />
    <!-- Scarf hanging end -->
    <path
      d="M135 145 Q145 155 140 175 Q138 185 145 190"
      fill="none"
      stroke="url(#scarfGrad)"
      stroke-width="12"
      stroke-linecap="round"
    />
    <path
      d="M135 145 Q145 155 140 175 Q138 185 145 190"
      fill="none"
      stroke="var(--scarf-stroke, #4a9bb8)"
      stroke-width="1"
      stroke-linecap="round"
    />
    <!-- Scarf stripes -->
    <path d="M58 138 Q100 145 142 138" stroke="var(--scarf-stripe, #fff)" stroke-width="2" fill="none" opacity="0.5" />
    <path d="M140 160 L143 172" stroke="var(--scarf-stripe, #fff)" stroke-width="2" fill="none" opacity="0.5" />
  </g>

  <!-- Happy closed eyes (^_^) -->
  <g class="face">
    <!-- Left eye - happy arc -->
    <path
      d="M72 95 Q80 85 88 95"
      fill="none"
      stroke="var(--eye-color, #5a3d20)"
      stroke-width="3.5"
      stroke-linecap="round"
    />
    <!-- Right eye - happy arc -->
    <path
      d="M112 95 Q120 85 128 95"
      fill="none"
      stroke="var(--eye-color, #5a3d20)"
      stroke-width="3.5"
      stroke-linecap="round"
    />
    
    <!-- Rosy cheeks -->
    <ellipse cx="65" cy="108" rx="10" ry="7" fill="url(#cheekGlow)" />
    <ellipse cx="135" cy="108" rx="10" ry="7" fill="url(#cheekGlow)" />
    
    <!-- Tiny happy mouth -->
    <path
      d="M93 118 Q100 125 107 118"
      fill="none"
      stroke="var(--eye-color, #5a3d20)"
      stroke-width="2.5"
      stroke-linecap="round"
    />
  </g>

  <!-- Sparkle accents -->
  <g filter="url(#sparkleGlow)" class="sparkles">
    <path d="M45 55 L47 60 L52 62 L47 64 L45 69 L43 64 L38 62 L43 60 Z" fill="var(--sparkle, #fff)" class="sparkle sparkle-1" />
    <path d="M160 70 L161.5 74 L165.5 75.5 L161.5 77 L160 81 L158.5 77 L154.5 75.5 L158.5 74 Z" fill="var(--sparkle, #fff)" class="sparkle sparkle-2" />
    <path d="M30 140 L31 143 L34 144 L31 145 L30 148 L29 145 L26 144 L29 143 Z" fill="var(--sparkle, #fff)" class="sparkle sparkle-3" />
  </g>
</svg>

<style>
  .bagel-mascot {
    display: block;
    filter: drop-shadow(0 8px 32px rgba(0, 0, 0, 0.15));
  }

  /* Floating animation for the whole bagel */
  .bagel-mascot {
    animation: floatBagel 4s ease-in-out infinite;
  }

  @keyframes floatBagel {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
  }

  /* Snowflake falling animations */
  .flake-1 { animation: fallSnow1 6s ease-in-out infinite; }
  .flake-2 { animation: fallSnow2 7s ease-in-out infinite 0.5s; }
  .flake-3 { animation: fallSnow3 5s ease-in-out infinite 1s; }
  .flake-4 { animation: fallSnow1 8s ease-in-out infinite 2s; }
  .flake-5 { animation: fallSnow2 6s ease-in-out infinite 1.5s; }
  .flake-6 { animation: fallSnow3 7s ease-in-out infinite 0.8s; }
  .flake-7 { animation: fallSnow1 5s ease-in-out infinite 2.5s; }
  .flake-8 { animation: fallSnow2 6s ease-in-out infinite 1.2s; }
  .flake-9 { animation: fallSnow3 8s ease-in-out infinite 0.3s; }

  @keyframes fallSnow1 {
    0%, 100% { transform: translate(0, 0) rotate(0deg); opacity: 0.7; }
    50% { transform: translate(-5px, 15px) rotate(180deg); opacity: 1; }
  }
  @keyframes fallSnow2 {
    0%, 100% { transform: translate(0, 0) rotate(0deg); opacity: 0.6; }
    50% { transform: translate(8px, 12px) rotate(-180deg); opacity: 0.9; }
  }
  @keyframes fallSnow3 {
    0%, 100% { transform: translate(0, 0) rotate(0deg); opacity: 0.8; }
    50% { transform: translate(-3px, 10px) rotate(90deg); opacity: 1; }
  }

  /* Sparkle twinkling */
  .sparkle-1 { animation: twinkle 2s ease-in-out infinite; }
  .sparkle-2 { animation: twinkle 2.5s ease-in-out infinite 0.8s; }
  .sparkle-3 { animation: twinkle 1.8s ease-in-out infinite 0.4s; }

  @keyframes twinkle {
    0%, 100% { opacity: 0.6; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.3); }
  }

  @media (prefers-reduced-motion: reduce) {
    .bagel-mascot,
    .flake-1, .flake-2, .flake-3, .flake-4, .flake-5, .flake-6, .flake-7, .flake-8, .flake-9,
    .sparkle-1, .sparkle-2, .sparkle-3 {
      animation: none;
    }
  }
</style>
